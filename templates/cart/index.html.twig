{# filepath: /opt/lampp/htdocs/proyectos/restaurantsym.local/templates/cart/index.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Mi Carrito{% endblock %}

{% block principal %}
</div>
    <h1>Mi Carrito</h1>
    <table class="table table-striped table-bordered">
        <thead class="thead-dark">
            <tr>
                <th>Producto</th>
                <th>Imagen</th>
                <th>Precio</th>
                <th>Cantidad</th>
                <th>Subtotal</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% set total = 0 %}
            {% for cartFood in cart.cartFoods %}
                {% set subtotal = cartFood.food.precio * cartFood.quantity %}
                {% set total = total + subtotal %}
                <tr>
                    <td>{{ cartFood.food.nombre }}</td>
                    <td><img src="{{ asset(cartFood.food.getUrlFood()) }}" alt="{{ cartFood.food.imagen }}" style="width: 100px; height: auto;"></td>
                    <td>{{ cartFood.food.precio }}€</td>
                    <td>{{ cartFood.quantity }}</td>
                    <td>{{ subtotal }}€</td>
                    <td>
                        <a href="{{ path('app_cart_remove', {id: cartFood.food.id}) }}" class="btn btn-danger">Eliminar</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <th colspan="4" class="text-right">Total</th>
                <th>{{ total }}€</th>
                <th></th>
            </tr>
        </tfoot>
    </table>
{% endblock %}